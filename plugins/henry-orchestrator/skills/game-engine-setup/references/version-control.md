# Version Control for Game Engines

Complete guide to setting up Git (and Perforce) for Unity, Unreal Engine, and Godot projects. Covers .gitignore configuration, Git LFS for large files, branching strategies, and collaboration workflows.

## Why Version Control for Games?

**Benefits:**

- Track changes to code, assets, scenes
- Collaborate with team members
- Revert to previous versions
- Branch for features/experiments
- Backup and disaster recovery

**Challenges:**

- Large binary files (textures, models, audio)
- Merge conflicts in scenes/levels
- Engine-generated files bloating repository
- File locking for binary assets

## Git Setup

### Installing Git

**Windows:**

```bash
# Download from git-scm.com
# Or via Chocolatey
choco install git

# Verify
git --version
```

**Mac:**

```bash
# Via Homebrew
brew install git

# Or Xcode Command Line Tools
xcode-select --install
```

**Linux:**

```bash
# Ubuntu/Debian
sudo apt-get install git

# Fedora
sudo dnf install git
```

### Git Configuration

**Global settings:**

```bash
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# Use LF line endings (consistent across platforms)
git config --global core.autocrlf false

# Case-sensitive file names
git config --global core.ignorecase false

# Use VS Code as diff/merge tool
git config --global diff.tool vscode
git config --global merge.tool vscode
```

## Git LFS (Large File Storage)

### Why Git LFS?

**Regular Git:**

- Stores entire history of every file
- Binary files bloat repository size
- Cloning/pulling slow

**Git LFS:**

- Stores large files on remote server
- Downloads only needed versions
- Repository stays small

### Installing Git LFS

```bash
# Windows (Chocolatey)
choco install git-lfs

# Mac (Homebrew)
brew install git-lfs

# Linux
sudo apt-get install git-lfs

# Initialize in repository
git lfs install
```

### Configuring Git LFS

**Track large file types:**

```bash
# Images
git lfs track "*.png"
git lfs track "*.jpg"
git lfs track "*.psd"
git lfs track "*.tga"

# 3D Models
git lfs track "*.fbx"
git lfs track "*.obj"
git lfs track "*.blend"
git lfs track "*.ma"
git lfs track "*.mb"

# Audio
git lfs track "*.wav"
git lfs track "*.mp3"
git lfs track "*.ogg"

# Video
git lfs track "*.mp4"
git lfs track "*.mov"

# Archives
git lfs track "*.zip"
git lfs track "*.rar"

# Commit .gitattributes
git add .gitattributes
git commit -m "Configure Git LFS"
```

**Check LFS tracking:**

```bash
git lfs track
git lfs ls-files
```

## Unity Git Setup

### Unity Project Configuration

**Before initializing Git:**

1. **Enable text serialization:**

```
Edit → Project Settings → Editor
  Version Control Mode: Visible Meta Files
  Asset Serialization: Force Text
```

**Why:** Text files merge better than binary, enables meaningful diffs.

2. **Disable auto-refresh (optional):**

```
Edit → Preferences → General
  Auto Refresh: False
```

**Why:** Prevents Unity from auto-refreshing during Git operations.

### Unity .gitignore

**Generate .gitignore:**

Use GitHub's Unity .gitignore template or:

```gitignore
# Unity generated files
[Ll]ibrary/
[Tt]emp/
[Oo]bj/
[Bb]uild/
[Bb]uilds/
[Ll]ogs/
[Uu]ser[Ss]ettings/

# MemoryCaptures can get excessive in size
/[Mm]emoryCaptures/

# Asset meta files
*.pidb.meta
*.pdb.meta
*.mdb.meta

# Unity3D generated meta files
*.pidb
*.booproj
*.svd
*.pdb
*.mdb
*.opendb
*.VC.db

# Unity3D generated file on crash reports
sysinfo.txt

# Autogenerated VS/MD/Consulo solution and project files
[Ee]xportedObj/
.consulo/
*.csproj
*.unityproj
*.sln
*.suo
*.tmp
*.user
*.userprefs
*.pidb
*.booproj
*.svd
*.pdb
*.mdb
*.opendb
*.VC.db

# Unity3D generated files for automated testing
/[Tt]est[Rr]unner/
*.userSettings

# JetBrains Rider
.idea/
*.sln.iml

# Visual Studio cache directory
.vs/

# Gradle files
.gradle/

# macOS
.DS_Store

# Builds
*.apk
*.aab
*.unitypackage
*.app

# Crashlytics generated file
crashlytics-build.properties

# Packed Addressables
[Aa]ssets/[Aa]ddressable[Aa]ssets[Dd]ata/*/*.bin*

# Temporary auto-generated Android Assets
[Aa]ssets/[Ss]treamingAssets/aa.meta
[Aa]ssets/[Ss]treamingAssets/aa/*
```

### Unity Git LFS Configuration

**.gitattributes for Unity:**

```gitattributes
# Unity YAML files (text)
*.mat merge=unityyamlmerge eol=lf
*.anim merge=unityyamlmerge eol=lf
*.unity merge=unityyamlmerge eol=lf
*.prefab merge=unityyamlmerge eol=lf
*.physicsMaterial2D merge=unityyamlmerge eol=lf
*.physicsMaterial merge=unityyamlmerge eol=lf
*.asset merge=unityyamlmerge eol=lf
*.meta merge=unityyamlmerge eol=lf
*.controller merge=unityyamlmerge eol=lf

# LFS - Images
*.png filter=lfs diff=lfs merge=lfs -text
*.jpg filter=lfs diff=lfs merge=lfs -text
*.jpeg filter=lfs diff=lfs merge=lfs -text
*.gif filter=lfs diff=lfs merge=lfs -text
*.psd filter=lfs diff=lfs merge=lfs -text
*.tga filter=lfs diff=lfs merge=lfs -text
*.tif filter=lfs diff=lfs merge=lfs -text
*.tiff filter=lfs diff=lfs merge=lfs -text
*.exr filter=lfs diff=lfs merge=lfs -text

# LFS - 3D Models
*.fbx filter=lfs diff=lfs merge=lfs -text
*.obj filter=lfs diff=lfs merge=lfs -text
*.blend filter=lfs diff=lfs merge=lfs -text
*.dae filter=lfs diff=lfs merge=lfs -text
*.3ds filter=lfs diff=lfs merge=lfs -text

# LFS - Audio
*.mp3 filter=lfs diff=lfs merge=lfs -text
*.wav filter=lfs diff=lfs merge=lfs -text
*.ogg filter=lfs diff=lfs merge=lfs -text
*.aif filter=lfs diff=lfs merge=lfs -text

# LFS - Video
*.mp4 filter=lfs diff=lfs merge=lfs -text
*.mov filter=lfs diff=lfs merge=lfs -text
*.avi filter=lfs diff=lfs merge=lfs -text

# LFS - Fonts
*.ttf filter=lfs diff=lfs merge=lfs -text
*.otf filter=lfs diff=lfs merge=lfs -text

# LFS - Unity specific
*.cubemap filter=lfs diff=lfs merge=lfs -text
*.unitypackage filter=lfs diff=lfs merge=lfs -text
```

### Unity YAML Merge Tool

**Setup Smart Merge:**

```bash
# Find UnityYAMLMerge tool
# Windows: C:/Program Files/Unity/Hub/Editor/{version}/Editor/Data/Tools/UnityYAMLMerge.exe
# Mac: /Applications/Unity/Hub/Editor/{version}/Unity.app/Contents/Tools/UnityYAMLMerge

# Configure Git to use it
git config merge.unityyamlmerge.name "Unity YAML Merge"
git config merge.unityyamlmerge.driver "'/path/to/UnityYAMLMerge' merge -p %O %B %A %A"
git config merge.unityyamlmerge.recursive binary
```

**Benefits:**

- Automatically resolves merge conflicts in Unity YAML files
- Handles scene and prefab merges intelligently

## Unreal Git Setup

### Unreal Project Configuration

**Unreal generates large files:**

- Compiled shaders (Saved/)
- Intermediate build files (Intermediate/)
- Binary assets (Content/)

**Use Git LFS extensively.**

### Unreal .gitignore

```gitignore
# Unreal Engine generated files
Binaries/
Build/
Intermediate/
Saved/
DerivedDataCache/

# Compiled source files
*.obj
*.pdb
*.pch
*.ipch

# Visual Studio files
.vs/
*.sln
*.VC.db
*.VC.opendb
*.suo
*.user

# Rider files
.idea/
*.sln.DotSettings.user

# macOS
.DS_Store

# Starter Content (if not using)
Content/StarterContent/

# Binary builds
*.exe
*.dll
*.dylib
*.so
*.pak
```

### Unreal Git LFS Configuration

**.gitattributes for Unreal:**

```gitattributes
# Unreal Engine file types

# LFS - Assets
*.uasset filter=lfs diff=lfs merge=lfs -text
*.umap filter=lfs diff=lfs merge=lfs -text

# LFS - 3D Models
*.fbx filter=lfs diff=lfs merge=lfs -text
*.obj filter=lfs diff=lfs merge=lfs -text
*.blend filter=lfs diff=lfs merge=lfs -text

# LFS - Textures
*.png filter=lfs diff=lfs merge=lfs -text
*.jpg filter=lfs diff=lfs merge=lfs -text
*.tga filter=lfs diff=lfs merge=lfs -text
*.exr filter=lfs diff=lfs merge=lfs -text
*.dds filter=lfs diff=lfs merge=lfs -text

# LFS - Audio
*.wav filter=lfs diff=lfs merge=lfs -text
*.mp3 filter=lfs diff=lfs merge=lfs -text
*.ogg filter=lfs diff=lfs merge=lfs -text

# LFS - Video
*.mp4 filter=lfs diff=lfs merge=lfs -text
*.mov filter=lfs diff=lfs merge=lfs -text

# LFS - Fonts
*.ttf filter=lfs diff=lfs merge=lfs -text
*.otf filter=lfs diff=lfs merge=lfs -text

# LFS - Binary files
*.dll filter=lfs diff=lfs merge=lfs -text
*.exe filter=lfs diff=lfs merge=lfs -text
*.dylib filter=lfs diff=lfs merge=lfs -text
*.so filter=lfs diff=lfs merge=lfs -text

# Text files (no LFS)
*.cpp text eol=lf
*.h text eol=lf
*.cs text eol=lf
*.ini text eol=lf
*.config text eol=lf
*.json text eol=lf
*.xml text eol=lf
*.md text eol=lf
```

### Unreal + Perforce (Alternative)

**Why Perforce for Unreal:**

- Unreal Engine has built-in Perforce support
- File locking prevents binary merge conflicts
- Faster for very large projects
- Industry standard for AAA studios

**Setup Perforce:**

1. Install Perforce Helix Core server
2. Install P4V client
3. In Unreal Editor:
   - Edit → Editor Preferences → Source Control
   - Provider: Perforce
   - Server: perforce:1666
   - Username: your_username

**File locking workflow:**

- Check out file before editing (locks for you)
- Other users can't edit until you submit/revert
- Prevents binary merge conflicts

## Godot Git Setup

### Godot Project Configuration

**Godot advantages for Git:**

- Text-based formats by default (.tscn scenes)
- Small repository size
- No special configuration needed

### Godot .gitignore

```gitignore
# Godot-specific ignores
.import/
export.cfg
export_presets.cfg

# Imported translations
*.translation

# Mono-specific ignores
.mono/
data_*/
mono_crash.*.json

# System/tool-specific ignores
.directory
.DS_Store
*.swp
*.swo
*~

# Build outputs
builds/
*.exe
*.pck
*.apk
*.ipa
*.dmg
*.zip
```

### Godot Git LFS Configuration

**Godot uses smaller files, but still use LFS for:**

```gitattributes
# LFS - Large Assets
*.png filter=lfs diff=lfs merge=lfs -text
*.jpg filter=lfs diff=lfs merge=lfs -text
*.wav filter=lfs diff=lfs merge=lfs -text
*.ogg filter=lfs diff=lfs merge=lfs -text
*.mp3 filter=lfs diff=lfs merge=lfs -text
*.blend filter=lfs diff=lfs merge=lfs -text
*.fbx filter=lfs diff=lfs merge=lfs -text
*.obj filter=lfs diff=lfs merge=lfs -text

# Text files (no LFS)
*.gd text eol=lf
*.tscn text eol=lf
*.tres text eol=lf
*.cfg text eol=lf
*.md text eol=lf
```

## Git Workflows

### Basic Workflow

**Clone repository:**

```bash
git clone https://github.com/username/game-project.git
cd game-project
```

**Make changes:**

```bash
# Check status
git status

# Stage files
git add .

# Commit
git commit -m "Add player jump mechanic"

# Push to remote
git push origin main
```

**Pull latest changes:**

```bash
git pull origin main
```

### Branching Strategy

**Feature branches:**

```bash
# Create and switch to feature branch
git checkout -b feature/player-movement

# Work on feature...
git add .
git commit -m "Implement player movement"

# Push feature branch
git push origin feature/player-movement

# Merge to main (via PR or locally)
git checkout main
git merge feature/player-movement
git push origin main
```

**Recommended branch structure:**

- `main` - Stable, production-ready
- `develop` - Active development
- `feature/*` - New features
- `bugfix/*` - Bug fixes
- `release/*` - Release preparation

### Resolving Merge Conflicts

**Text conflicts (scripts):**

```bash
# Pull latest
git pull origin main

# Conflict in PlayerController.cs
# Edit file, choose changes
# Remove conflict markers (<<<, ===, >>>)

# Stage resolved file
git add PlayerController.cs

# Complete merge
git commit
```

**Binary conflicts (scenes, prefabs):**

```bash
# Scene conflict - can't auto-merge

# Option 1: Keep yours
git checkout --ours Assets/Scenes/Level01.unity
git add Assets/Scenes/Level01.unity

# Option 2: Keep theirs
git checkout --theirs Assets/Scenes/Level01.unity
git add Assets/Scenes/Level01.unity

# Option 3: Manually re-merge in engine
# Open both versions, manually reconcile changes
```

**Avoiding conflicts:**

- Communicate with team about who's editing what
- Use file locking (Perforce or Unity Collaborate)
- Break scenes into smaller sub-scenes
- Use prefabs to isolate changes

## Collaboration Best Practices

### Commit Guidelines

**Good commit messages:**

```bash
# Good
git commit -m "Add double jump to player controller"
git commit -m "Fix camera clipping through walls"
git commit -m "Update enemy AI patrol behavior"

# Bad
git commit -m "Fixed stuff"
git commit -m "WIP"
git commit -m "Changes"
```

**Commit frequently:**

- Commit after each logical change
- Don't commit broken/non-compiling code to main
- Use feature branches for experiments

### File Organization

**Avoid moving files:**

- Git tracks content, but LFS complicates moves
- If must rename/move, coordinate with team

**Large files:**

- Keep assets optimized (compress textures, audio)
- Don't commit build artifacts
- Use .gitignore liberally

### Communication

**Before pushing:**

- Pull latest changes first
- Test that everything works
- Check that build succeeds

**Coordinate on:**

- Scene/level edits (high conflict risk)
- Project settings changes (affects everyone)
- Large asset additions (LFS bandwidth)

## Git Hosting Services

### GitHub

**Pros:**

- Free for public repos, generous free tier for private
- 2GB Git LFS storage free, $5/month for 50GB
- GitHub Actions for CI/CD
- Large community

**Setup:**

```bash
git remote add origin https://github.com/username/game-project.git
git push -u origin main
```

### GitLab

**Pros:**

- Free for private repos
- 10GB Git LFS storage free
- GitLab CI/CD built-in
- Self-hosted option

**Setup:**

```bash
git remote add origin https://gitlab.com/username/game-project.git
git push -u origin main
```

### Bitbucket

**Pros:**

- Free for small teams (up to 5 users)
- 1GB Git LFS storage free
- Jira integration

**Setup:**

```bash
git remote add origin https://bitbucket.org/username/game-project.git
git push -u origin main
```

### Self-Hosted (Gitea, GitLab)

**Pros:**

- Complete control
- No LFS storage limits
- No bandwidth limits

**Cons:**

- Must maintain server
- Initial setup complexity

## Troubleshooting

**Large repository size:**

```bash
# Check LFS status
git lfs ls-files

# Ensure large files tracked by LFS
git lfs track "*.png"
git add .gitattributes

# Migrate existing files to LFS
git lfs migrate import --include="*.png,*.jpg"
```

**Slow clone/pull:**

- Use Git LFS (stores pointers, not full files)
- Shallow clone: `git clone --depth 1 https://...`
- Partial clone: `git clone --filter=blob:none https://...`

**LFS bandwidth exceeded:**

- Upgrade GitHub LFS plan
- Use self-hosted Git LFS server
- Optimize assets (compress textures, audio)

**Merge conflicts in scenes:**

- Use Unity YAML merge tool
- Communicate with team before editing shared scenes
- Break scenes into smaller, modular parts

## Further Reading

- **Git Documentation**: Official Git reference
- **GitHub Guides**: Using Git and GitHub
- **Unity Version Control**: Best practices
- **Unreal Source Control**: Perforce and Git guides

## See Also

- `unity-setup.md` - Unity project configuration
- `unreal-setup.md` - Unreal project configuration
- `build-pipelines.md` - CI/CD integration with Git
