<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accessible Navigation - ARIA & Keyboard Support</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      line-height: 1.6;
    }

    /* Skip to main content link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      padding: 8px 16px;
      background: #0066cc;
      color: white;
      text-decoration: none;
      z-index: 100;
    }

    .skip-link:focus {
      top: 0;
    }

    /* Navigation styles */
    .navbar {
      background: #ffffff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 50;
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      min-height: 64px;
    }

    .nav-brand {
      font-size: 1.5rem;
      font-weight: bold;
      color: #0066cc;
      text-decoration: none;
    }

    .nav-brand:focus-visible {
      outline: 2px solid #0066cc;
      outline-offset: 4px;
      border-radius: 4px;
    }

    /* Desktop navigation */
    .nav-menu {
      display: none;
      list-style: none;
      gap: 2rem;
    }

    .nav-menu a {
      color: #333;
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 4px;
      transition: background-color 0.2s;
    }

    .nav-menu a:hover {
      background-color: #f0f0f0;
    }

    .nav-menu a:focus-visible {
      outline: 2px solid #0066cc;
      outline-offset: 2px;
    }

    .nav-menu a[aria-current="page"] {
      background-color: #e6f2ff;
      color: #0066cc;
      font-weight: 600;
    }

    /* Dropdown submenu */
    .nav-item-dropdown {
      position: relative;
    }

    .nav-dropdown-toggle {
      background: none;
      border: none;
      font: inherit;
      color: #333;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: background-color 0.2s;
    }

    .nav-dropdown-toggle:hover {
      background-color: #f0f0f0;
    }

    .nav-dropdown-toggle:focus-visible {
      outline: 2px solid #0066cc;
      outline-offset: 2px;
    }

    .dropdown-icon {
      display: inline-block;
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 4px solid currentColor;
      transition: transform 0.2s;
    }

    .nav-dropdown-toggle[aria-expanded="true"] .dropdown-icon {
      transform: rotate(180deg);
    }

    .nav-submenu {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      border-radius: 4px;
      min-width: 200px;
      list-style: none;
      padding: 8px 0;
      margin-top: 4px;
    }

    .nav-submenu[aria-hidden="false"] {
      display: block;
    }

    .nav-submenu a {
      display: block;
      padding: 8px 16px;
      color: #333;
      text-decoration: none;
      transition: background-color 0.2s;
    }

    .nav-submenu a:hover,
    .nav-submenu a:focus {
      background-color: #f0f0f0;
    }

    .nav-submenu a:focus-visible {
      outline: 2px solid #0066cc;
      outline-offset: -2px;
    }

    /* Mobile menu button */
    .mobile-menu-button {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 44px;
      height: 44px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
      border-radius: 4px;
    }

    .mobile-menu-button:hover {
      background-color: #f0f0f0;
    }

    .mobile-menu-button:focus-visible {
      outline: 2px solid #0066cc;
      outline-offset: 2px;
    }

    .hamburger-line {
      width: 24px;
      height: 2px;
      background-color: #333;
      transition: all 0.3s;
    }

    .hamburger-line:not(:last-child) {
      margin-bottom: 4px;
    }

    .mobile-menu-button[aria-expanded="true"] .hamburger-line:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .mobile-menu-button[aria-expanded="true"] .hamburger-line:nth-child(2) {
      opacity: 0;
    }

    .mobile-menu-button[aria-expanded="true"] .hamburger-line:nth-child(3) {
      transform: rotate(-45deg) translate(6px, -6px);
    }

    /* Mobile menu panel */
    .mobile-nav-panel {
      display: none;
      background: white;
      border-top: 1px solid #e0e0e0;
      padding: 1rem;
    }

    .mobile-nav-panel[aria-hidden="false"] {
      display: block;
    }

    .mobile-nav-menu {
      list-style: none;
    }

    .mobile-nav-menu a,
    .mobile-nav-menu button {
      display: block;
      width: 100%;
      padding: 12px;
      color: #333;
      text-decoration: none;
      border-radius: 4px;
      transition: background-color 0.2s;
      text-align: left;
      background: none;
      border: none;
      font: inherit;
      cursor: pointer;
    }

    .mobile-nav-menu a:hover,
    .mobile-nav-menu button:hover {
      background-color: #f0f0f0;
    }

    .mobile-nav-menu a:focus-visible,
    .mobile-nav-menu button:focus-visible {
      outline: 2px solid #0066cc;
      outline-offset: 2px;
    }

    .mobile-nav-menu a[aria-current="page"] {
      background-color: #e6f2ff;
      color: #0066cc;
      font-weight: 600;
    }

    .mobile-submenu {
      display: none;
      list-style: none;
      padding-left: 1rem;
      margin-top: 4px;
    }

    .mobile-submenu[aria-hidden="false"] {
      display: block;
    }

    .mobile-submenu a {
      padding: 8px 12px;
    }

    /* Main content */
    .main-content {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .content-section {
      margin-bottom: 2rem;
      padding: 2rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    /* Responsive breakpoints */
    @media (min-width: 768px) {
      .nav-menu {
        display: flex;
      }

      .mobile-menu-button {
        display: none;
      }

      .mobile-nav-panel {
        display: none !important;
      }
    }

    /* Focus visible polyfill for older browsers */
    .js-focus-visible :focus:not(.focus-visible) {
      outline: none;
    }
  </style>
</head>
<body>
  <!-- Skip to main content link for keyboard users -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Navigation -->
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="nav-container">
      <!-- Logo/Brand -->
      <a href="#" class="nav-brand">Brand</a>

      <!-- Desktop Navigation Menu -->
      <ul class="nav-menu" role="menubar">
        <li role="none">
          <a href="#home" role="menuitem" aria-current="page">Home</a>
        </li>

        <li class="nav-item-dropdown" role="none">
          <button
            class="nav-dropdown-toggle"
            role="menuitem"
            aria-haspopup="true"
            aria-expanded="false"
            id="products-button"
          >
            Products
            <span class="dropdown-icon" aria-hidden="true"></span>
          </button>
          <ul
            class="nav-submenu"
            role="menu"
            aria-labelledby="products-button"
            aria-hidden="true"
          >
            <li role="none">
              <a href="#product1" role="menuitem">Product 1</a>
            </li>
            <li role="none">
              <a href="#product2" role="menuitem">Product 2</a>
            </li>
            <li role="none">
              <a href="#product3" role="menuitem">Product 3</a>
            </li>
          </ul>
        </li>

        <li role="none">
          <a href="#services" role="menuitem">Services</a>
        </li>

        <li role="none">
          <a href="#about" role="menuitem">About</a>
        </li>

        <li role="none">
          <a href="#contact" role="menuitem">Contact</a>
        </li>
      </ul>

      <!-- Mobile Menu Toggle Button -->
      <button
        class="mobile-menu-button"
        aria-expanded="false"
        aria-controls="mobile-menu"
        aria-label="Toggle navigation menu"
      >
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
    </div>

    <!-- Mobile Navigation Panel -->
    <div id="mobile-menu" class="mobile-nav-panel" aria-hidden="true">
      <ul class="mobile-nav-menu">
        <li>
          <a href="#home" aria-current="page">Home</a>
        </li>

        <li>
          <button
            aria-expanded="false"
            aria-controls="mobile-products-submenu"
          >
            Products
          </button>
          <ul id="mobile-products-submenu" class="mobile-submenu" aria-hidden="true">
            <li><a href="#product1">Product 1</a></li>
            <li><a href="#product2">Product 2</a></li>
            <li><a href="#product3">Product 3</a></li>
          </ul>
        </li>

        <li>
          <a href="#services">Services</a>
        </li>

        <li>
          <a href="#about">About</a>
        </li>

        <li>
          <a href="#contact">Contact</a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <main id="main-content" class="main-content">
    <section class="content-section">
      <h1>Accessible Navigation Example</h1>
      <p>
        This navigation demonstrates proper accessibility features including:
      </p>
      <ul>
        <li><strong>ARIA attributes:</strong> Proper roles, states, and properties</li>
        <li><strong>Keyboard navigation:</strong> Full keyboard support with Tab, Enter, Escape, and Arrow keys</li>
        <li><strong>Screen reader support:</strong> Semantic HTML and descriptive labels</li>
        <li><strong>Focus management:</strong> Visible focus indicators and logical tab order</li>
        <li><strong>Mobile accessibility:</strong> Touch-friendly targets (44x44px minimum)</li>
        <li><strong>Skip navigation:</strong> Skip link for keyboard users to bypass navigation</li>
      </ul>
    </section>

    <section class="content-section">
      <h2>Keyboard Controls</h2>
      <dl>
        <dt><strong>Tab:</strong></dt>
        <dd>Move forward through interactive elements</dd>

        <dt><strong>Shift + Tab:</strong></dt>
        <dd>Move backward through interactive elements</dd>

        <dt><strong>Enter or Space:</strong></dt>
        <dd>Activate links and buttons</dd>

        <dt><strong>Escape:</strong></dt>
        <dd>Close dropdown menus</dd>

        <dt><strong>Arrow Down:</strong></dt>
        <dd>Navigate into dropdown submenu</dd>
      </dl>
    </section>

    <section class="content-section">
      <h2>WCAG Compliance</h2>
      <p>This navigation meets WCAG 2.1 Level AA standards:</p>
      <ul>
        <li>4.5:1 color contrast for text</li>
        <li>Visible focus indicators</li>
        <li>Touch targets at least 44x44px</li>
        <li>Semantic HTML structure</li>
        <li>Proper heading hierarchy</li>
        <li>Descriptive link text</li>
      </ul>
    </section>
  </main>

  <!-- JavaScript for accessibility features -->
  <script>
    // Mobile menu toggle
    const mobileMenuButton = document.querySelector('.mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    mobileMenuButton.addEventListener('click', () => {
      const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
      mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
      mobileMenu.setAttribute('aria-hidden', isExpanded);
    });

    // Desktop dropdown functionality
    const dropdownToggles = document.querySelectorAll('.nav-dropdown-toggle');

    dropdownToggles.forEach(toggle => {
      const submenu = toggle.nextElementSibling;

      // Click to toggle
      toggle.addEventListener('click', () => {
        const isExpanded = toggle.getAttribute('aria-expanded') === 'true';

        // Close all other dropdowns
        dropdownToggles.forEach(otherToggle => {
          if (otherToggle !== toggle) {
            otherToggle.setAttribute('aria-expanded', 'false');
            otherToggle.nextElementSibling.setAttribute('aria-hidden', 'true');
          }
        });

        // Toggle current dropdown
        toggle.setAttribute('aria-expanded', !isExpanded);
        submenu.setAttribute('aria-hidden', isExpanded);
      });

      // Arrow down to enter submenu
      toggle.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          toggle.setAttribute('aria-expanded', 'true');
          submenu.setAttribute('aria-hidden', 'false');
          submenu.querySelector('a').focus();
        }
      });

      // Escape to close
      submenu.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          toggle.setAttribute('aria-expanded', 'false');
          submenu.setAttribute('aria-hidden', 'true');
          toggle.focus();
        }
      });
    });

    // Mobile submenu toggles
    const mobileSubmenuToggles = document.querySelectorAll('.mobile-nav-menu button');

    mobileSubmenuToggles.forEach(toggle => {
      toggle.addEventListener('click', () => {
        const submenuId = toggle.getAttribute('aria-controls');
        const submenu = document.getElementById(submenuId);
        const isExpanded = toggle.getAttribute('aria-expanded') === 'true';

        toggle.setAttribute('aria-expanded', !isExpanded);
        submenu.setAttribute('aria-hidden', isExpanded);
      });
    });

    // Close dropdowns when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.nav-item-dropdown')) {
        dropdownToggles.forEach(toggle => {
          toggle.setAttribute('aria-expanded', 'false');
          toggle.nextElementSibling.setAttribute('aria-hidden', 'true');
        });
      }
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.navbar')) {
        mobileMenuButton.setAttribute('aria-expanded', 'false');
        mobileMenu.setAttribute('aria-hidden', 'true');
      }
    });

    // Announce current page for screen readers
    document.querySelectorAll('[aria-current="page"]').forEach(link => {
      link.setAttribute('aria-label', link.textContent + ' (current page)');
    });
  </script>
</body>
</html>
